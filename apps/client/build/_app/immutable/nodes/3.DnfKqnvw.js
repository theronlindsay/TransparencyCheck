import{d as fe,a as k,f as D}from"../chunks/B0XpXUNy.js";import{aq as me,b as be,h as Y,a as we,ar as le,H as ge,s as he,i as ke,j as W,q as ye,m as X,as as Ce,at as De,au as xe,av as Be,x as re,aw as Ne,A as ie,ax as Ae,$ as Le,a5 as y,ad as Fe,V as Ie,a6 as n,d as e,a3 as J,a4 as Se,a0 as i,a1 as s,a2 as r,an as Te,ay as Ee,az as C}from"../chunks/DmPSzBqa.js";import{s as O}from"../chunks/CWZleTfL.js";import{B as $e,i as ee}from"../chunks/CLo8OjLx.js";import{e as Re}from"../chunks/BwzCRPuz.js";import{r as Pe}from"../chunks/SVnnPJKx.js";import{a as Ue,b as qe,c as te}from"../chunks/PRPOCrtn.js";import{B as He}from"../chunks/CQ_L7bua.js";const oe=0,ae=1;function je(Z,K,A,x,S){Y&&we();var z=me(),v=Ne,u=z?re(v):ie(v,!1,!1),d=z?re(v):ie(v,!1,!1),c=new $e(Z);be(()=>{var m=K(),L=!1;let T=Y&&le(m)===(Z.data===ge);if(T&&(he(ke()),W(!1)),le(m)){var G=Ae(),F=!1;const b=_=>{if(!L){F=!0,G(!1),Ce.ensure(),Y&&W(!1);try{_()}finally{De(),xe||Be()}}};m.then(_=>{b(()=>{X(u,_),c.ensure(ae,x&&(B=>x(B,u)))})},_=>{b(()=>{if(X(d,_),c.ensure(ae,S&&(B=>S(B,d))),!S)throw d.v})}),Y?c.ensure(oe,A):ye(()=>{F||b(()=>{c.ensure(oe,A)})})}else X(u,m),c.ensure(ae,x&&(b=>x(b,u)));return T&&W(!0),()=>{L=!0}})}var Me=D('<span class="filter-badge svelte-1lkutw2"> </span>'),Oe=D('<div class="filters-panel svelte-1lkutw2"><div class="filter-group svelte-1lkutw2"><label for="search" class="svelte-1lkutw2">Search Bills</label> <input id="search" type="text" placeholder="Search by title or bill number..." class="filter-input svelte-1lkutw2"/></div> <div class="filter-group svelte-1lkutw2"><label for="chamber" class="svelte-1lkutw2">Chamber</label> <select id="chamber" class="filter-select svelte-1lkutw2"><option>All Chambers</option><option>House</option><option>Senate</option></select></div> <div class="filter-group svelte-1lkutw2"><label for="party" class="svelte-1lkutw2">Sponsor Party</label> <select id="party" class="filter-select svelte-1lkutw2"><option>All Parties</option><option>Democrat</option><option>Republican</option><option>Independent</option></select></div> <div class="filter-group svelte-1lkutw2"><label for="sort" class="svelte-1lkutw2">Sort By</label> <select id="sort" class="filter-select svelte-1lkutw2"><option>Most Recent</option><option>Oldest First</option><option>Title (A-Z)</option><option>Bill Number</option></select></div> <div class="filter-group svelte-1lkutw2"><button class="reset-btn svelte-1lkutw2">Reset Filters</button></div></div>'),Ze=D('<div class="empty-state svelte-1lkutw2"><p class="svelte-1lkutw2">No bills match your filters.</p> <button class="reset-btn svelte-1lkutw2">Clear Filters</button></div>'),ze=D('<div class="bills-grid svelte-1lkutw2"></div>'),Ge=D('<div class="results-info svelte-1lkutw2"><p>Showing <strong class="svelte-1lkutw2"> </strong> of <strong class="svelte-1lkutw2"> </strong> bills</p></div> <!>',1),Qe=D('<div class="error-message svelte-1lkutw2"><p> </p></div>'),Ve=D('<div class="loading-message svelte-1lkutw2"><div class="spinner svelte-1lkutw2"></div> <p>Loading bills...</p></div>'),Ye=D('<div class="bills-page svelte-1lkutw2"><div class="page-header svelte-1lkutw2"><h1 class="svelte-1lkutw2">Congressional Bills</h1> <p class="subtitle svelte-1lkutw2">Browse and filter all bills in the database</p></div> <div class="filters-container svelte-1lkutw2"><button class="toggle-filters-btn svelte-1lkutw2" aria-label="Toggle filters"><span class="icon svelte-1lkutw2"> </span> Filters <!></button> <!></div> <!></div>');function lt(Z,K){Le(K,!0);let A=y(Fe([])),x=y(!0),S=y(null);async function z(){try{const t=await fetch(Ue("/api/bills"));if(!t.ok)throw new Error(`Failed to fetch bills: ${t.status}`);const a=await t.json();n(A,a,!0),n(x,!1)}catch(t){console.error("Error fetching bills:",t),n(S,t.message,!0),n(x,!1)}}Ie(()=>{z()});let v=y(""),u=y("all"),d=y("all"),c=y("date"),m=y(!0),L=C(()=>{let t=e(A)||[];if(e(v).trim()){const a=e(v).toLowerCase();t=t.filter(l=>l.title?.toLowerCase().includes(a)||l.billNumber?.toLowerCase().includes(a)||l.id?.toLowerCase().includes(a))}return e(u)!=="all"&&(t=t.filter(a=>a.originChamber?.toLowerCase()===e(u).toLowerCase())),e(d)!=="all"&&(t=t.filter(a=>a.sponsors?.[0]?.party===e(d))),t=[...t].sort((a,l)=>{switch(e(c)){case"date":return new Date(l.updateDate||0)-new Date(a.updateDate||0);case"date-asc":return new Date(a.updateDate||0)-new Date(l.updateDate||0);case"title":return(a.title||"").localeCompare(l.title||"");case"number":return(a.billNumber||"").localeCompare(l.billNumber||"");default:return 0}}),t});function T(){n(v,""),n(u,"all"),n(d,"all"),n(c,"date")}let G=C(()=>{let t=0;return e(v).trim()&&t++,e(u)!=="all"&&t++,e(d)!=="all"&&t++,e(c)!=="date"&&t++,t});var F=Ye(),b=s(i(F),2),_=i(b);_.__click=()=>n(m,!e(m));var B=i(_),ne=i(B,!0);r(B);var ve=s(B,2);{var ue=t=>{var a=Me(),l=i(a,!0);r(a),J(()=>O(l,e(G))),k(t,a)};ee(ve,t=>{e(G)>0&&t(ue)})}r(_);var ce=s(_,2);{var pe=t=>{var a=Oe(),l=i(a),h=s(i(l),2);Pe(h),r(l);var w=s(l,2),E=s(i(w),2),I=i(E);I.value=I.__value="all";var $=s(I);$.value=$.__value="house";var Q=s($);Q.value=Q.__value="senate",r(E),r(w);var R=s(w,2),P=s(i(R),2),f=i(P);f.value=f.__value="all";var p=s(f);p.value=p.__value="D";var g=s(p);g.value=g.__value="R";var o=s(g);o.value=o.__value="I",r(P),r(R);var U=s(R,2),q=s(i(U),2),H=i(q);H.value=H.__value="date";var j=s(H);j.value=j.__value="date-asc";var M=s(j);M.value=M.__value="title";var V=s(M);V.value=V.__value="number",r(q),r(U);var se=s(U,2),_e=i(se);_e.__click=T,r(se),r(a),qe(h,()=>e(v),N=>n(v,N)),te(E,()=>e(u),N=>n(u,N)),te(P,()=>e(d),N=>n(d,N)),te(q,()=>e(c),N=>n(c,N)),k(t,a)};ee(ce,t=>{e(m)&&t(pe)})}r(b);var de=s(b,2);je(de,()=>data.bills,t=>{var a=Ve();k(t,a)},t=>{var a=Ge(),l=Te(a),h=i(l),w=s(i(h)),E=i(w,!0);r(w);var I=s(w,2),$=i(I,!0);r(I),Ee(),r(h),r(l);var Q=s(l,2);{var R=f=>{var p=Ze(),g=s(i(p),2);g.__click=T,r(p),k(f,p)},P=f=>{var p=ze();Re(p,21,()=>e(L),g=>g.id,(g,o)=>{{let U=C(()=>e(o).billNumber||e(o).number||""),q=C(()=>e(o).title||"Untitled Bill"),H=C(()=>e(o).sponsors||[]),j=C(()=>e(o).primaryCommitteeName||"Unassigned"),M=C(()=>e(o).billType?.toUpperCase()||""),V=C(()=>e(o).updateDate||e(o).updatedAt||"");He(g,{get id(){return e(o).id},get number(){return e(U)},get title(){return e(q)},get sponsors(){return e(H)},get committee(){return e(j)},get statusTag(){return e(M)},get latestAction(){return e(o).latestAction},get updatedAt(){return e(V)}})}}),r(p),k(f,p)};ee(Q,f=>{e(L).length===0?f(R):f(P,!1)})}J(()=>{O(E,e(L).length),O($,e(A)?.length||0)}),k(t,a)},(t,a)=>{var l=Qe(),h=i(l),w=i(h);r(h),r(l),J(()=>O(w,`Error loading bills: ${e(a).message??""}`)),k(t,l)}),r(F),J(()=>O(ne,e(m)?"▼":"▶")),k(Z,F),Se()}fe(["click"]);export{lt as component};
